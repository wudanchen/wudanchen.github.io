import{useLocaleConfig as c,isString as i,isArray as d}from"@vuepress/helper/client";import{defineComponent as m,shallowRef as u,h as y,onMounted as S,onBeforeUnmount as g}from"vue";import{g as s}from"../getLink-DBmDl_2w.js";import"vidstack/player/styles/default/theme.css";import"vidstack/player/styles/default/layouts/audio.css";import"vidstack/player/styles/default/layouts/video.css";import"../styles/vidstack.scss";import"vuepress/client";var k=m({name:"VidStack",props:{src:{type:[String,Array,Object],required:!0},tracks:{type:Array,default:()=>[]},poster:String,thumbnails:String,title:String,player:{type:Object},layout:{type:Object},darkmode:Boolean},setup(r){const a=u(),n=c(VIDSTACK_LOCALES);let t=null;return S(async()=>{if(__VUEPRESS_SSR__)return;const{VidstackPlayer:p,VidstackPlayerLayout:l}=await import("vidstack/global/player"),e={target:a.value,crossOrigin:!0,poster:r.poster,title:r.title,...r.player,layout:new l({colorScheme:r.darkmode?"dark":"light",thumbnails:r.thumbnails,translations:n.value,...r.layout})};e.src=i(r.src)?s(r.src):d(r.src)?r.src.map(o=>i(o)?s(o):o):r.src,r.tracks.length&&(e.tracks=r.tracks),t=await p.create(e),t.addEventListener("provider-change",()=>{t.provider?.type==="hls"&&HLS_JS_INSTALLED?t.provider.library=(()=>import("hls.js/dist/hls.min.js")):t.provider?.type==="dash"&&DASHJS_INSTALLED&&(t.provider.library=(()=>import("dashjs")))})}),g(()=>{t?.destroy()}),()=>y("div",{ref:a})}});export{k as default};
//# sourceMappingURL=VidStack.js.map
